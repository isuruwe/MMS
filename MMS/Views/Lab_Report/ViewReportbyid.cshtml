
@{
    ViewBag.Title = "ViewReport";
  
}


@using PagedList.Mvc;
@using PagedList;
<link href="@Url.Content("~/Scripts/css/bootstrap.min.css")" rel="stylesheet">
<link href="@Url.Content("~/Scripts/css/datepicker3.css")" rel="stylesheet">
<link href="@Url.Content("~/Scripts/css/styles.css")" rel="stylesheet">

<!--Icons-->
<script src="@Url.Content("~/Scripts/js/lumino.glyphs.js")"></script>

<script src="@Url.Content("~/Scripts/js/jquery.min.js")"></script>
<script src="@Url.Content("~/Scripts/js/bootstrap.min.js")"></script>
<script src="@Url.Content("~/Scripts/js/chart.min.js")"></script>


  
<script src="~/Scripts/js/jquery.js"></script>
<script src="~/Scripts/js/jquery.dataTables.min.js"></script>
<script src="~/Scripts/js/metisMenu.min.js"></script>
<script src="~/Scripts/js/sb-admin-2.js"></script>
<script src="~/Scripts/js/dataTables.bootstrap.min.js"></script>
<script src="~/Scripts/js/dataTables.responsive.js"></script>
<script src="~/Scripts/Angular/angular.js"></script>
<script src="~/Scripts/angular.min.js"></script>
<script src="~/Scripts/angular-route.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/ui-bootstrap-tpls-1.3.3.min.js"></script>
<script src="~/Scripts/angular-filter.js"></script>
<link rel="stylesheet" href="~/Scripts/css/bootstrap.min.css">
<link rel="stylesheet" href="~/Scripts/css/font-awesome.min.css">
<link rel="stylesheet" href="~/Scripts/css/animate.min.css">
<link rel="stylesheet" href="~/Scripts/css/et-line-font.css">
<link rel="stylesheet" href="~/Scripts/css/nivo-lightbox.css">
@*<link rel="stylesheet" href="~/Scripts/css/nivo_themes/default/default.css">*@
<link rel="stylesheet" href="~/Scripts/css/style.css">
@*<script src="~/Scripts/js/bootstrap.min.js"></script>*@
<script src="~/Scripts/js/smoothscroll.js"></script>
<script src="~/Scripts/js/isotope.js"></script>
<script src="~/Scripts/js/imagesloaded.min.js"></script>
<script src="~/Scripts/js/nivo-lightbox.min.js"></script>
<script src="~/Scripts/js/jquery.backstretch.min.js"></script>
<script src="~/Scripts/js/wow.min.js"></script>
<script src="~/Scripts/js/custom.js"></script>

<style>
    #labtb {
        font-size: 12px;
    }
</style>

<div ng-app="LabApp" class="container">

    <div ng-controller="LabCntrl">

        <div ng-show="divPor" class="form-horizontal ">

            <section class="navbar navbar-fixed-top custom-navbar" role="navigation">
                <div class="container hidden-print  ">

                    <div class="collapse navbar-collapse">
                        <ul class="nav navbar-nav navbar-left">
                            <li>
                                <a href="@Url.Action("Index","Home")">HOME</a>
                            </li>
                            <li>
                                <input type="submit" ng-click="printDiv('prins');" value="Print" class="btn-primary btn-sm" />



                            </li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="#about">HOME</a></li>
                            <li><a href="#work">Lab Report</a></li>
                            <li><a href="#contact">Chart</a></li>
                            @*<li><a href="#about" class="smoothScroll">ABOUT</a></li>*@

                            @*<li><a href="#portfolio" class="smoothScroll">PORTFOLIO</a></li>*@

                        </ul>

                    </div>



                </div>
            </section>

            <section id="about">
                <div class="container " id="uper">
                    <div class="row">

                        <div class="col-md-12 col-sm-12">
                            <h3></h3>

                        </div>

                        @*<script>
                            $(document).ready(function () {

                                document.getElementById('datest').valueAsDate = new Date();
                            });

                            </script>*@


                        <div class="form-group">
                            <div class="col-md-6">
                                <div class="col-md-6">
                                    Service No
                                    <input type="text" class="form-control" style="color:blue" ng-model="SearchString" />
                                </div><div class="col-md-6">
                                    Date
                                    <input id="datest" type="date" class="form-control" style="color:blue" ng-model="SearchString1" />
                                </div>
                                <div class="col-md-2">
                                    <a class="btn-primary btn text-uppercase" href="@Url.Action("ViewReportbyid","Lab_Report")?id={{SearchString}}&id1={{SearchString1}}">Search</a>
                                </div>
                            </div>
                         
                        </div>
                        <div class="form-horizontal" style="border:1px solid #0094ff; overflow-y:hidden">
                            @if (ViewBag.OnePageOfProducts.Count > 0)
                            {
                                <table class="table table-striped">
                                    <tr>
                                        <th>

                                        </th>
                                        <th>
                                            Service No
                                        </th>
                                        <th>
                                            Name
                                        </th>
                                        <th>
                                            Date
                                        </th>
                                        <th>
                                            Test Name
                                        </th>
                                       


                                    </tr>

                                    @foreach (var item in (IEnumerable<MMS.Models.getlabdata>)ViewBag.OnePageOfProducts)
                                    {
                                        <tr>
                                            <td align="left">
                                                @item.relasiont
                                            </td>

                                            <td align="left">

                                                <a href="#work" ng-click="viewlabtest('@item.tsid','@item.catid');loadcamp();">@item.sno </a>
                                            </td>
                                            <td align="left">

                                                <a href="#work" ng-click="viewlabtest('@item.tsid','@item.tubecat');loadcamp();">@item.rnkname @item.fname @item.sname</a>
                                            </td>
                                            <td align="left">
                                                @item.rtime
                                            </td>

                                            <td align="left">
                                                @item.catname
                                            </td>
                                           

                                        </tr>
                                    }

                                </table>
                            }
                            else
                            {
                                //Response.Redirect("~/Home/Index/");
                                <div><center>No Results</center></div>
                            }
                            @Html.PagedListPager((IPagedList)ViewBag.OnePageOfProducts, page => Url.Action("ViewReportbyid", new { page }))
                        </div>

                    </div>
                </div>
            </section>
            <div ng-show="showloader" id="loading">
                <img id="loading-image" src="~/Content/Images/loading.png" />
            </div>

            <section id="work">
                <div class="container">
                    <div class="row">


                        <div name="prins" id="prins" class="psa " align="center">
                            <div class="col-md-12 col-sm-12 ">
                                <br /><br /><br /><br /><br /><br />
                                <div class="section-title">
                                    <h5>
                                        @*{{viewcamp[0].Description}}*@
                                    </h5>
                                    <h5>{{viewlab[0].CategoryName}}</h5>
                                    <p>
                                        Sevice No:{{viewlab[0].ServiceNo}}
                                        <br />Name:{{viewlab[0].Relationship=='SELF' ?  viewlab[0].RNK_NAME : '' }}  {{viewlab[0].Initials}}  {{viewlab[0].Surname}}
                                        <br />Date:{{viewlab[0].RequestedTime | date:'dd/MM/yyyy HH:mm'  }}
                                    </p>
                                    <hr>
                                </div>
                            </div>

                            <div class="col-lg-12   wow fadeInUp" data-wow-delay="0.5s">

                                @*<h3>Patient Details</h3>*@





                                <table name="sd" id="labtb">
                                    <thead>
                                        <tr>
                                            <th width="30%" align="left">Test Name</th>
                                            <th width="20%" align="left">Result</th>
                                            <th width="20%" align="left"></th>
                                            <th width="20%" align="left">Reference Range</th>
                                            <th width="20%" align="left"></th>

                                        </tr>
                                    </thead>
                                    <tbody ng-repeat="field in viewlab">
                                        <tr>
                                            <td width="30%" align="left"> {{field.SubCategoryName}}</td>
                                            <td width="20%" align="left">


                                                <div ng-show="isNumber(field.testResult)">{{  field.testResult-0 | number   }}</div>
                                                <div ng-show="!isNumber(field.testResult)">{{  field.testResult   }}</div>

                                            </td>

                                            <td width="20%" align="left"> {{field.teststatus}}</td>
                                            <td width="20%" align="left">{{ field.ReferenceRange }}</td>
                                            <td width="20%" align="left"> {{field.ReferenceRangeUnit}}</td>
                                        </tr>

                                    </tbody>


                                    @* <span ng-show="myForm.{{field.name}}.$dirty && myForm.{{field.name}}.$error.required">Required!</span>*@
                                    @* <span ng-show="myForm.{{field.name}}.$dirty && myForm.{{field.name}}.$error.email">Not email!</span>*@
                                </table>
                            </div>
                            @*<button ng-disabled="myForm.$invalid">Submit</button>*@
                            <input type="submit" ng-click="printDiv('prins');" value="Print" class="btn btn-default hidden-print" />


                            @*<div class="form-group">
                                    @Html.Label("ServiceNo", htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col-md-10">
                                        <input type="text" ng-model="ServiceNo" ng-required="true" ng-blur="GetPatient(ServiceNo,Relationship.RTypeID)" />
                                    </div>
                                </div>
                                <div ng-show="GetPatientDet.length > 1">
                                    <div class="form-group">
                                        @Html.Label("Child", htmlAttributes: new { @class = "control-label col-md-2" })
                                        <select id="pdnew" ng-model="pidnew" ng-change="loadchild(pidnew)" ng-options="d as d.Initials for d in PatientDetdr">
                                            <option value="">-- Select Child --</option>
                                        </select>
                                    </div>
                                </div>*@


                        </div>
                    </div>
                </div>
            </section>
            <section id="contact">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="col-md-2">

                            @Html.Hidden("pageInitCounter", Session["svcrpt"])


                            <select ID="DropDownList1" href="#contact" onchange="vwchart()">
                                <option>FBS</option>
                                <option>RBS</option>
                                <option>PPBS</option>
                                <option>GTT</option>
                                <option>Cholesterol</option>
                                <option>HDL</option>
                                <option>Trigly</option>
                                <option>LDL</option>

                                <option>AST</option>
                                <option>ALT</option>
                                <option>GGT</option>
                                <option>ALP</option>
                                <option>T.Bill</option>

                                <option>Indirect Bil</option>
                                <option>D.Bill</option>
                                <option>T.Protein</option>
                                <option>ALB</option>
                                <option>Creatinine</option>
                                <option>Urea</option>
                                <option>Sodium</option>
                                <option>Potassium</option>
                                <option>Chloride</option>

                                <option>TSH</option>
                                <option>T4</option>
                                <option>T3</option>
                                <option>HBA1C</option>
                                <option>Vitamin D Level</option>
                                <option>Ferritin(Male)</option>
                                <option>Ferritin(Female)</option>
                                <option>CRP</option>
                                <option>PT</option>
                                <option>INR</option>
                                <option>APTT</option>
                                <option>Uric Acid</option>
                                <option>Amylase</option>


                            </select>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-heading"></div>
                            <div class="panel-body">
                                <div class="canvas-wrapper" id="c2">
                                    @*<canvas class="main-chart" id="line-chart" height="200" width="600"></canvas>*@
                                    <canvas id="LineChart" height="200" width="600"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </div>

    </div>
</div>
@section scripts {
<script src="~/Scripts/Lab/Module.js"></script>
<script src="~/Scripts/Lab/Service.js"></script>
<script src="~/Scripts/Lab/Controller.js"></script>
    <script src="~/Scripts/Chart.js"></script>
    <script src="~/Scripts/Common.js"></script>
<script>
    function vwchart(){
        debugger;
       $('#LineChart').remove();
       //$('#Chart1').remove();
       //$('#Chart2').remove();

       //  $('#c1').append('<canvas id="MultiLineChart" width="400" height="150"></canvas>');
       $('#c2').append('<canvas id="LineChart" width="400" height="150"></canvas>');
       //$('#c3').append('<canvas id="Chart1" width="400" height="150"></canvas>');
       //$('#c4').append('<canvas id="Chart2" width="400" height="150"></canvas>');
       //----Line Chart---------
       //var myLineChart4 = null;
       //if (myLineChart4 ) {
       //    myLineChart4.destroy();

       //}
       //  var f = $("#yerc").val();
       //var c = document.getElementById("MultiLineChart");
       //var ctx = c.getContext("2d");
       //var tData = $.getValues("/MMS/Manage/MultiLineChartData?id=" + f);
       // myLineChart4 = new Chart(ctx, {
       //    type: 'line',
       //    data: tData
       // });
       // myLineChart4.update();
       //----Multi Line Chart---------
       var myLineChart5 = null;
       if (myLineChart5) {
           myLineChart5.destroy();
       }
       var c = document.getElementById("LineChart");
       var ctx = c.getContext("2d");
       var tData = $.getValues("/MMS/Lab_Report/LineChartData?id=" + $("#pageInitCounter").val() + "&id2=" + $("#DropDownList1").val());
       myLineChart5 = new Chart(ctx, {
           type: 'line',
           data: tData
       });
       myLineChart5.update();
       //----Multi Line Chart---------
       // var myLineChart6 = null;
       // if (myLineChart6 ) {
       //     myLineChart6.destroy();
       // }
       //var c = document.getElementById("Chart1");
       //var ctx = c.getContext("2d");
       //var tData = $.getValues("/MMS/Manage/Chart1?id=" + f);
       // myLineChart6 = new Chart(ctx, {
       //    type: 'line',
       //    data: tData
       // });
       // myLineChart6.update();
       //----Multi Line Chart---------
       // debugger;
       // var myLineChart7 = null;
       // if (myLineChart7 ) {
       //     myLineChart7.destroy();
       // }
       //var c = document.getElementById("Chart2");
       //var ctx = c.getContext("2d");
       //var tData = $.getValues("/MMS/Manage/Chart2?id="+f);
       // myLineChart7 = new Chart(ctx, {
       //    type: 'line',
       //    data: tData
       // });
       // myLineChart7.update();
    }
        debugger;
     //   document.getElementById('yerc').valueAsDate = new Date();
      //  $('#MultiLineChart').remove();
      
</script>}
<div>
    @Html.ActionLink("Back to List", "Index")
</div>

